# BaseVault Fee Structure

## Overview
BaseVault implements a comprehensive fee system designed to generate sustainable revenue while remaining competitive with other DeFi protocols.

## Fee Types

### 1. Deposit Fees (0.5%)
- **Charged**: On every deposit transaction
- **Calculation**: `fee = depositAmount * 0.5%`
- **Purpose**: Cover gas costs and incentivize TVL growth
- **Example**: Deposit 1000 USDC → 5 USDC fee

### 2. Withdrawal Fees (0.3%)
- **Charged**: On every withdrawal transaction
- **Calculation**: `fee = withdrawalAmount * 0.3%`
- **Purpose**: Discourage excessive withdrawals, stabilize TVL
- **Example**: Withdraw 1000 USDC → 3 USDC fee

### 3. Performance Fees (2%)
- **Charged**: On profits generated by strategies
- **Calculation**: `fee = (currentValue - highWaterMark) * 2%`
- **High Water Mark**: Only charge on new profits
- **Purpose**: Align incentives with user returns
- **Example**: Generate 100 USDC profit → 2 USDC fee

### 4. Management Fees (0.5% annual)
- **Charged**: Time-based fee on total assets
- **Calculation**: `fee = totalAssets * 0.5% * (timeElapsed / 365 days)`
- **Purpose**: Cover operational costs
- **Example**: 100,000 USDC for 1 year → 500 USDC fee

### 5. Vault Creation Fee (0.001 ETH)
- **Charged**: When deploying new vault via factory
- **Purpose**: Prevent spam deployments, generate revenue
- **Example**: Create new vault → 0.001 ETH fee (~$2-3)

### 6. Strategy Performance Fees (8-10%)
- **Charged**: On harvest profits from strategies
- **Aerodrome Strategy**: 10%
- **Uniswap V3 Strategy**: 8%
- **Purpose**: Incentivize optimal strategy management

### 7. Copy Trading Leader Fees (up to 20%)
- **Charged**: Followers pay leaders for copying trades
- **Customizable**: Leaders set their own rate
- **Purpose**: Incentivize top performers to share strategies

## Fee Collection Flow

```
User Deposit
    ↓
Calculate Deposit Fee (0.5%)
    ↓
Transfer Net Amount to Vault
    ↓
Transfer Fee to FeeCollector
    ↓
FeeDistributor splits fees:
    - 70% to Treasury
    - 30% to Development Fund
```

## Revenue Projections

### Conservative Scenario
- TVL: $1M
- Monthly Volume: $500K deposits + $300K withdrawals
- Monthly Revenue:
  - Deposit fees: $2,500
  - Withdrawal fees: $900
  - Performance fees: $400 (assuming 2% monthly gains)
  - Management fees: $417
  - **Total: ~$4,200/month**

### Optimistic Scenario
- TVL: $10M
- Monthly Volume: $5M deposits + $3M withdrawals
- Monthly Revenue:
  - Deposit fees: $25,000
  - Withdrawal fees: $9,000
  - Performance fees: $4,000
  - Management fees: $4,167
  - Vault creations: $100 (10 vaults)
  - **Total: ~$42,267/month**

## Competitive Analysis

| Protocol | Deposit Fee | Withdrawal Fee | Performance Fee | Management Fee |
|----------|-------------|----------------|-----------------|----------------|
| BaseVault | 0.5% | 0.3% | 2% | 0.5% annual |
| Yearn Finance | 0% | 0.5% | 20% | 2% annual |
| Beefy Finance | 0% | 0.1% | 4.5% | 0% |
| Convex | 0% | 0% | 17% | 0% |

**Advantage**: BaseVault's fees are competitive while providing multiple revenue streams.

## Gas Optimization

Our gas-optimized fee collection reduces costs by:
- **Bit-packing**: Store 4 fee rates in 1 storage slot
- **Batching**: Collect multiple fees in single transaction
- **Unchecked math**: Safe overflow prevention with lower gas
- **Estimated savings**: 30-40% vs naive implementation

## Fee Distribution

Collected fees are distributed as follows:
- **70%**: Treasury (operational costs, development)
- **20%**: Liquidity providers (incentives)
- **10%**: Buyback & burn (if governance token exists)

## Transparency

All fees are:
- ✅ Clearly documented
- ✅ Verifiable on-chain
- ✅ Tracked via RevenueTracker contract
- ✅ Displayed in real-time on frontend

## Governance

Fee rates can be adjusted by governance with:
- **Minimum**: 24-hour timelock
- **Maximum rates**: Capped at reasonable limits
- **Community approval**: Multi-sig required for changes
